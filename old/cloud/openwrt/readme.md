这是Relay云的C语言实现

借用了mjpg_streamer的框架，把转发的核心逻辑做成一个插件，借着框架把插件启动，本身跟mjpg没有关系，无耦合

插件复用了input_file.so，可以换个名字，但意义不大，改进的方向应该是独立的可执行程序，加到启动脚本中

一些信息，备忘：

1. 两个socket都运行于wan网络下，理论上可以用端口转发实现，没找到线索，遗留

2. socket option主要关注端口复用，收发的buffer区大小

3. 一共有4个线程，分两组，都是server端，两个负责监听两头的客户端连接，两个负责数据转发，一个上行转发，给遥控器；一个下行转发，给proxy

4. 之所以把转发单独搞个线程，是因为某些情况，客户端已经挂了，但server socket的接收线程还在read函数阻塞，影响新的客户端连接后accept函数，所以把收发做成一个线程，accept做成一个线程，新的客户端连接后，accept函数不再阻塞，创建一个新的收发线程，，响应新的客户端数据

5. mjpg-streamer的cmake脚本有问题，修改.c后不识别更新，要手动删除so才行，extern外部函数编译能过，运行时报找不到函数错误

6. 异常退出没有堆栈，依赖打log，开发环境不友好，待解决

7. 多线程操作注意加锁

8. 进程的堆栈很小，不要在while里分配大量空间，收发的buffer尽量用全局变量，在堆里分配

9. relay无业务逻辑，单纯的转发，代码简单，运行发现CPU占用也不高，挺稳定

10.优化方向是增加业务看板，增加多客户端支持
